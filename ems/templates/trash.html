{% extends 'index.html' %}

{% block content %}

<title>{% block title %}Trash{% endblock %}</title>

<div class="container-fluid">

    {% if messages %}
    <div class="alert alert-success" role="alert" id="message-alert">
        {% for message in messages %}
            <p>{{ message }}</p>
        {% endfor %}
    </div>

    <script>
        window.onload = function() {
            setTimeout(function() {
                document.getElementById('message-alert').style.display = 'none';
            }, 3000);
        }
    </script>
{% endif %}


    <!-- Deleted Parishes Table -->
    <div class="card w-100 position-relative overflow-hidden">
        <div class="px-4 py-3 border-bottom d-flex align-items-center">
            <h4 class="mb-0 fw-semibold">Deleted Parishes</h4>
        </div>
        <div class="card-body p-4">
            <div class="table-responsive border rounded-1">
                <table class="table mb-0">
                  <thead class="table-info">
                        <tr>
                            <th>Parish Name</th>
                            <th>Secretary Name</th>
                            <th>Restore</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for parish in inactive_parishes %}
                            <tr>
                                <td>{{ parish.parish_name }}</td>
                                <td>{{ parish.secretary_name }}</td>
                                <td>
                                    <a href="{% url 'restore_object' model_name='Parish' object_id=parish.id %}" 
                                        class="btn d-flex justify-content-center align-items-center" 
                                        style="width: 40px; height: 40px; border-radius: 50%; display: flex; justify-content: center; align-items: center;">
                                        <iconify-icon icon="mdi:restore" style="font-size: 20px;"></iconify-icon>
                                    </a>


                                </td>
                            </tr>
                        {% empty %}
                            <tr>
                                <td colspan="3" class="text-center text-muted">No deleted parishes found.</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Deleted Users Table -->
    <div class="card w-100 position-relative overflow-hidden">
        <div class="px-4 py-3 border-bottom d-flex align-items-center">
            <h4 class="mb-0 fw-semibold">Deleted Users</h4>
        </div>
        <div class="card-body p-4">
            <div class="table-responsive border rounded-1">
                <table class="table mb-0">
                  <thead class="table-info">
                        <tr>
                            <th>Username</th>
                            <th>Parish</th>
                            <th>Restore</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for user in inactive_users %}
                            <tr>
                                <td>{{ user.username }}</td>
                                <td>{{ user.parish }}</td>
                                <td>
                                    <a href="{% url 'restore_object' model_name='UserRegistration' object_id=user.id %}" 
                                        class="btn d-flex justify-content-center align-items-center" 
                                        style="width: 40px; height: 40px; border-radius: 50%; display: flex; justify-content: center; align-items: center;">
                                        <iconify-icon icon="mdi:restore" style="font-size: 20px;"></iconify-icon>
                                    </a>
                                </td>
                            </tr>
                        {% empty %}
                            <tr>
                                <td colspan="3" class="text-center text-muted">No deleted users found.</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Deleted Role Table -->
    <div class="card w-100 position-relative overflow-hidden">
        <div class="px-4 py-3 border-bottom d-flex align-items-center">
            <h4 class="mb-0 fw-semibold">Deleted Roles</h4>
        </div>
        <div class="card-body p-4">
            <div class="table-responsive border rounded-1">
                <table class="table mb-0">
                  <thead class="table-info">
                        <tr>
                            <th>Role</th>
                            <th>Status</th>
                            <th>Restore</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for role in inactive_roles %}
                            <tr>
                                <td>{{ role.role }}</td>
                                <td>
                                    {% if role.status == 'Inactive' %}
                                        <span class="badge bg-danger-subtle text-danger"> {{ role.status }}</span>
                                    {% endif %}
                                </td>
                                <td>
                                    <a href="{% url 'restore_object' model_name='Role' object_id=role.id %}" 
                                        class="btn d-flex justify-content-center align-items-center" 
                                        style="width: 40px; height: 40px; border-radius: 50%; display: flex; justify-content: center; align-items: center;">
                                        <iconify-icon icon="mdi:restore" style="font-size: 20px;"></iconify-icon>
                                    </a>
                                </td>
                            </tr>
                        {% empty %}
                            <tr>
                                <td colspan="3" class="text-center text-muted">No deleted roles found.</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Deleted Event Type Table -->
    <div class="card w-100 position-relative overflow-hidden">
        <div class="px-4 py-3 border-bottom d-flex align-items-center">
            <h4 class="mb-0 fw-semibold">Deleted Event Types</h4>
        </div>
        <div class="card-body p-4">
            <div class="table-responsive border rounded-1">
                <table class="table mb-0">
                  <thead class="table-info">
                        <tr>
                            <th>Event Type</th>
                            <th>Duration</th>
                            <th>Restore</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for event_type in inactive_event_types %}
                            <tr>
                                <td>{{ event_type.event_type }}</td>
                                <td>{{ event_type.duration }}</td>
                                <td>
                                    <a href="{% url 'restore_object' model_name='EventType' object_id=event_type.id %}" 
                                        class="btn d-flex justify-content-center align-items-center" 
                                        style="width: 40px; height: 40px; border-radius: 50%; display: flex; justify-content: center; align-items: center;">
                                        <iconify-icon icon="mdi:restore" style="font-size: 20px;"></iconify-icon>
                                    </a>
                                </td>
                            </tr>
                        {% empty %}
                            <tr>
                                <td colspan="3" class="text-center text-muted">No deleted event types found.</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
        <!-- Deleted Events Table -->
    <div class="card w-100 position-relative overflow-hidden">
        <div class="px-4 py-3 border-bottom d-flex align-items-center">
            <h4 class="mb-0 fw-semibold">Deleted Events</h4>
        </div>
        <div class="card-body p-4">
            <div class="table-responsive border rounded-1">
                <table class="table mb-0">
                    <thead class="table-info">
                        <tr>
                            <th>Event Name</th>
                            <th>Event Type</th>
                            <th>Date</th>
                            <th>Restore</th>
                        </tr>
                    </thead>
                    <tbody>
                    {% for event in deleted_events %}
                        <tr>
                            <td>{{ event.event_name }}</td>
                            <td>{{ event.event_type }}</td>
                            <td>{{ event.event_date }}</td>
                            <td>
                                <a href="{% url 'restore_object' model_name='Event' object_id=event.id %}" 
                                    class="btn d-flex justify-content-center align-items-center" 
                                    style="width: 40px; height: 40px; border-radius: 50%; display: flex; justify-content: center; align-items: center;">
                                    <iconify-icon icon="mdi:restore" style="font-size: 20px;"></iconify-icon>
                                </a>
                            </td>
                        </tr>
                    {% empty %}
                        <tr>
                            <td colspan="4" class="text-center text-muted">No deleted events found.</td>
                        </tr>
                    {% endfor %}
                     </tbody>
                 </table>
            </div>
        </div>
    </div>


</div>

{% endblock %}
